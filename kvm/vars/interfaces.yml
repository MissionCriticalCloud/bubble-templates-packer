bond:
  interfaces: "{{ ansible_interfaces | select('match', '^em|^eno|^eth|^p2') | list }}"

interfaces:
  eth0:
    onboot: "yes"
    netboot: "yes"
    ipv6init: "no"
    bootproto: none
    mtu: 1600

  eth1:
    onboot: "yes"
    netboot: "yes"
    ipv6init: "no"
    bootproto: none
    mtu: 1600

  podbr0:
    name: POD
    onboot: "yes"
    devicetype: ovs
    type: OVSBridge
    bootproto: dhcp
    macaddr: $(ip link show eth0 | grep link | awk '{ print $2 }')
    ovs_extra: "set Interface $DEVICE mtu_request=1600 -- set bridge podbr0 other-config:hwaddr=$MACADDR"
    mtu: 1600

  cloud0:
    onboot: "yes"
    devicetype: ovs
    type: OVSBridge
    ipaddr: 169.254.0.1
    netmask: 255.255.0.0
    bootproto: static

  bond0:
    name: BOND
    onboot: "yes"
    devicetype: ovs
    type: OVSBond
    ovs_bridge: podbr0
    bootproto: none
    mtu: 1600
    bond_ifaces: "eth0 eth1"

  pubbr0:
    onboot: "yes"
    devicetype: ovs
    type: OVSBridge
    ovs_options: "podbr0 50"
    mtu: 1500
    bootproto: none
