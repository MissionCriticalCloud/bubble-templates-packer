{
    "builders": [
        {
            "type": "qemu",
            "iso_url": "http://ftp.tudelft.nl/centos.org/6/isos/x86_64/CentOS-6.10-x86_64-minimal.iso",
            "iso_checksum": "7c0dee2a0494dabd84809b72ddb4b761f9ef92b78a506aef709b531c54d30770",
            "output_directory": "packer_output",
            "ssh_wait_timeout": "1440m",
            "shutdown_command": "poweroff",
            "disk_size": "8192",
            "format": "qcow2",
            "accelerator": "kvm",
            "headless": "true",
            "qemuargs": [
                [
                    "-smp",
                    "4"
                ],
                [
                    "-m",
                    "1024M"
                ]
            ],
            "http_directory": "httpdir",
            "http_port_min": 10082,
            "http_port_max": 10089,
            "host_port_min": 2222,
            "host_port_max": 2229,
            "ssh_username": "root",
            "ssh_password": "password",
            "ssh_port": 22,
            "vm_name": "cloudstack-centos-6.qcow2",
            "net_device": "virtio-net",
            "disk_interface": "virtio-scsi",
            "disk_cache": "unsafe",
            "disk_discard": "unmap",
            "disk_compression": true,
            "boot_command": [
                "<tab> text ks=http://{{ .HTTPIP }}:{{ .HTTPPort }}/kickstart/centos69.ks<enter><wait>"
            ]
        }
    ],
    "provisioners": [
        {
            "type": "shell",
            "scripts": [
                "scripts/packages.sh",
                "scripts/cleanup.sh"
            ]
        },
        {
            "type": "shell",
            "inline": [ "mkdir -p /etc/cloud/cloud.cfg.d" ]
        },
        {
            "type": "file",
            "source": "files/cloud.cfg",
            "destination": "/etc/cloud/cloud.cfg"
        },
        {
            "type": "file",
            "source": "files/99_cloudstack.cfg",
            "destination": "/etc/cloud/cloud.cfg.d/99_cloudstack.cfg"
        }
    ]
}
